<?xml version="1.0" standalone="no"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
                      "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<book>
<bookinfo>
<title>The SOD Manual</title>
<author><firstname>Philip</firstname><surname>Crotwell</surname></author>
<copyright>
<year>2002</year>
<holder>University of South Carolina</holder>
</copyright>
</bookinfo>

<chapter><title>Introduction</title>
<para>Welcome to Sod, the Standing Order for Data. Sod aims to automate the
process of selecting, subsetting, retrieving and processing of event based
seismic data. It is based on the DHI subset of the Fissures framework. 
Fissures itself is based on Corba, and almost all implementation work to date
has been done in Java.</para>
<para>Sod is currently event based. This assumption that requests will only
be for data
that is associated in some sense to a particular seismic event certainly does
not cover all of seismology, but is without a doubt the largest catagory. A
future version of Sod may allow non-event based requests.
</para>
<para>
It is also not a GUI based application. The intention is that Sod will be a 
long running, background process that assembles and does initial processing
of seismic data that may be of interest. Certainly GUIs may be created that
work with Sod, but Sod itself will not provide these GUI tools.
</para>
<para>
The design of Sod breaks the definition of interesting data into three stages
or arms. The first is the event arm, which deals solely with selecting events.
Common criteria used to decide whether and event is interesting include
magnitude, depth, and location. Note however that items such as distance from
a station are not appropriate as they involve additional information that
is not contained within the event.
</para>
<para>
The second arm is the network arm. It deals with determining which seismic
stations are interesting, and which channels at those stations are useful. 
Common criteria include station location, network affiliation, sampling
rate and channel orientation.
</para>
<para>
The last arm is the waveform arm. It merges the successful events and channels
from the two previous arms and uses them to request wavefoms. Criteria
here include things such as disstance and azimuth that require the combination
of both station and event information, as well as measurements on the actual
waveform.
</para>
</chapter>

<chapter>
<title>Structure</title>
<para>
The Structure of a sod configuration file is shown below. In general, for 
each step there are multiple tags that can fufull that function, and those 
shown below are merely placeholders. In addition to the specialized subsetters,
 there are also logical subsetters for each type. For example, at the eventAttr
subsetter location, there are eventAttrAND, eventAttrOR, eventAttrXOR and 
eventAttrNOT. Each of these logical subsetters take as subtags any subsetter
of the same type allowing the creation of complex subsetters from the existing
simple ones.
</para>
<programlisting>
&lt;sod&gt;
    &lt;eventArm&gt;
        &lt;eventFinder&gt; or &lt;eventChannelFinder&gt;
        &lt;eventAttr&gt;
        &lt;origin&gt;
        &lt;eventProcess&gt;
    &lt;/eventArm&gt;
    &lt;networkArm&gt;
        &lt;networkFinder&gt;
        &lt;networkID&gt;
        &lt;networkAttr&gt;
        &lt;stationID&gt;
        &lt;station&gt;
        &lt;siteID&gt;
        &lt;site&gt;
        &lt;channelID&gt;
        &lt;channel&gt;
        &lt;networkProcess&gt;
    &lt;/networkArm&gt;
    &lt;waveFormArm&gt;
        &lt;eventStation&gt;
        &lt;dataCenter&gt;
        &lt;localSeismogramArm&gt;
            &lt;eventChannel&gt;
            &lt;requestGenerator&gt;
            &lt;availableData&gt;
            &lt;waveForm&gt;
            &lt;localSeismogramProcess&gt;
        &lt;/localSeismogramArm&gt;
    &lt;/waveFromArm&gt;
&lt;sod&gt;
</programlisting>
</chapter>

<chapter>
<title>Common Elements</title>
<para>
There are many elements that are used within more than one place within a
sod configuration file. In order to avoid repitition, each common element is
documented here, and referenced from the places where they can be used.
</para>
<sect1>
<title>Data Sources</title>
<para>
Each connection to a remote server must contain information to allow sod
to conect to it. In general, each data source element, whether it be events,
networks, or seismograms, specifies two subtags in order to identify the
server to conntect to.
</para>
<para> 
The serverDNS gives the heirarchy of naming
contexts, or directories, in reveresd DNS format. This is similar to the 
Java package naming convention, and so a server located within the seismology
program at the University of South Carolina might have a serverDNS of
&gt;serverDNS&lt;edu/sc/seis&gt;/serverDNS&lt;. 
Another common serverDNS would be for the IRIS DMC, which is
currently edu/iris/dmc.
</para>
<para>
The serverName is the name of the server within the serverDNS context. 
For example, the current event server at the DMC is 
&lt;serverName&gt;IRIS_EventDC&lt;/serverName&gt;. 
It is possible to have multiple 
servers within the same serverDNS with different names, and so both serverName
and serverDNS are required in order to uniquely identify a server.
</para>
</sect1>
</chapter>

<chapter>
<title>Event Arm</title>
<para>
The event arm separates seismic events into interesting and 
non-interesting events. Interesting events flow out of the event arm into
the waveform arm for further processing, while non-interesting events are 
discarded. There are four main steps within the event arm, which are described
below.
</para>
<sect1>
<title>Source</title>
<para>
The source of the event information is given first. It can either be a
event finder or an event channel. Event finders are primarily used to
mine historical event catalogs, while the event channel provides notification
of new origins and events.
</para>
<sect2>
<title>Event Finder</title>
<para>The event finder configuration is given in an &lt;eventFinder&gt; tag, 
and consists of a serverDNS
and a serverName entry, both of which allow Fissures DHI EventDC servers to
be located from a Naming Service, as well as elements to specify a coarse
level query for events.
</para>
<sect3>
<title>Server DNS and Name</title>
<para>test</para>
</sect3>
<sect3>
<title>Area</title>
<para>
This specifies an source area for event searching. There are four types 
currently defined within the FISSURES framework, and a corresponding element
for each can be specified here. The simplest is the &lt;globalArea&gt; element,
which accepts any location. The &lt;boxArea&gt; tag allows any event that is
located within a latitude-longitude box. It contains
</para>
</sect3>
</sect2>
</sect1>

<sect1>
<title>Event Attributes</title>
<para>
test
</para>
</sect1>
</chapter>

</book>